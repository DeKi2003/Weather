<!DOCTYPE html>
<html>
<head>
  <title>Autocomplete Example</title>
  <script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearchLite.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
  <div id="app">
    <h1>Autocomplete Example</h1>
    <input type="text" v-model="query" @input="fetchAlgoliaSuggestions" placeholder="Search">
    <ul>
      <li v-for="suggestion in suggestions" @click="showDetails(suggestion)">
        {{ suggestion.name }}
      </li>
    </ul>
    <div v-if="selectedSuggestion">
      <h2>Details</h2>
      <p>City: {{ selectedSuggestion.name }}</p>
      <p>Country: {{ selectedSuggestion.country }}</p>
      <p>Latitude: {{ selectedSuggestion.lat }}</p>
      <p>Longitude: {{ selectedSuggestion.lng }}</p>
    </div>
  </div>

  <script>
    const appId = 'STZ35PR6GN';
    const apiKey = '269a59d0b9a329365fe81ecb15c1d228';

    const algolia = algoliasearch(appId, apiKey);
    const index = algolia.initIndex('city_query_suggestions');

    new Vue({
      el: '#app',
      data() {
        return {
          query: '',
          suggestions: [],
          selectedSuggestion: null,
        };
      },
      methods: {
        fetchAlgoliaSuggestions() {
          if (this.query.length > 0) {
            index
              .search(this.query, { hitsPerPage: 5 })
              .then(({ hits }) => {
                this.suggestions = hits;
              })
              .catch(error => {
                console.error(error);
                this.suggestions = [];
              });
          } else {
            this.suggestions = [];
          }
        },
        showDetails(suggestion) {
          this.selectedSuggestion = suggestion;
        },
      },
    });
  </script>
</body>
</html>
